# The Aichemist Codex Configuration
# This file allows you to customize the behavior of the Aichemist Codex.

[codex]
# Directories to monitor for file changes
# Format: each entry can be a simple path string or a table with advanced settings
directories_to_watch = [
    # Simple format examples:
    # "D:/Downloads",
    # "/home/user/Documents"

    # Advanced format examples with per-directory settings:
    # { path = "D:/Important", priority = "high", recursive_depth = 5, throttle = 0 },
    # { path = "D:/Downloads", priority = "low", recursive_depth = 2, throttle = 2 }
]

# Global monitoring settings (can be overridden per directory)
default_priority = "normal"  # Priority levels: "critical", "high", "normal", "low"
default_recursive_depth = 3  # How deep to scan subdirectories (0 = no recursion)
default_throttle = 1.0       # Seconds to wait between processing files in high-activity dirs (0 = no throttling)

# Auto-registration of new directories
auto_discover_directories = false    # Whether to automatically add new directories
auto_discover_parent_dirs = []       # Parent directories to scan for new directories
auto_discover_interval = 3600        # Seconds between auto-discovery scans (1 hour)
auto_discover_depth = 1              # How deep to scan for new directories

# Sorting interval in seconds (how often to run scheduled sorting)
sorting_interval = 300  # 5 minutes

# Change history settings
change_history_retention_days = 30  # How long to keep change history records
change_debounce_interval = 2.0      # Seconds to wait for rapid sequential changes

# Change severity thresholds (percentage of file changed)
minor_change_threshold = 0.05       # 5% changed = minor
moderate_change_threshold = 0.25    # 25% changed = moderate
major_change_threshold = 0.50       # 50% changed = major
                                    # >50% changed = critical

# Additional patterns to ignore beyond the default ones
# These use glob patterns that are matched against file paths
ignore_patterns = [
    # Add custom patterns here, for example:
    # "*.tmp",
    # "temp*.*"
]

# Specific directories to ignore completely
# These can be absolute paths or relative to monitored directories
ignored_directories = [
    # Add directories to ignore here, for example:
    # "D:/Projects/Private",
    # "temp_files"
]

# Maximum file size to process (in bytes)
max_file_size = 52428800  # 50MB

# Token limit for analysis
max_tokens = 8000

# Versioning settings
[versioning]
# Whether to automatically create versions when files change
auto_create_versions = true

# Create versions when files are modified (vs. only on creation or specific operations)
version_on_modify = true

# Maximum number of versions to keep per file
max_versions_per_file = 20

# Default versioning policy (FULL_COPY, DIFF_BASED, HYBRID)
# - FULL_COPY: Store complete file copy for each version
# - DIFF_BASED: Store only differences between versions for text files
# - HYBRID: Use diff for text files, full copies for binary files
default_policy = "HYBRID"

# Number of days to keep versions before cleanup
version_retention_days = 30

# Use compression for stored versions to save space
compression_enabled = true

# File patterns to include in versioning (glob patterns)
include_patterns = [
    "*.py",
    "*.js",
    "*.ts",
    "*.html",
    "*.css",
    "*.md",
    "*.txt",
    "*.json",
    "*.yaml",
    "*.yml",
    "*.xml",
    "*.csv",
    "*.sql"
]

# File patterns to exclude from versioning (glob patterns)
exclude_patterns = [
    "*.log",
    "*.tmp",
    "*.temp",
    "*.swp",
    "*.bak",
    "*.backup",
    "*.pyc",
    "*.class",
    "*.o",
    "*.obj"
]

# Notification system settings
[notification]
# Master toggle for the notification system
enabled = true

# Time-based cleanup for notifications
retention_days = 30

# Maximum number of notifications to store per type
max_notifications_per_type = 1000

# Valid notification levels in increasing severity
notification_levels = ["INFO", "WARNING", "ERROR", "CRITICAL"]

# Default level for notifications
default_level = "INFO"

# Configure notification channels
[notification.channels]

# Logging channel configuration
[notification.channels.log]
enabled = true
min_level = "INFO"  # Minimum level to log

# Email channel configuration
[notification.channels.email]
enabled = false  # Off by default, enable by setting to true
min_level = "WARNING"  # Only warnings and above are emailed
recipients = []  # Add email addresses like ["user@example.com"]
from_address = ""  # Email sender
subject_prefix = "[Aichemist Codex] "  # Prefix for email subjects

# Webhook channel configuration
[notification.channels.webhook]
enabled = false  # Off by default
min_level = "WARNING"  # Only warnings and above trigger webhooks
endpoints = []  # Add webhook URLs
headers = {}  # Add custom headers for webhook requests

# Database storage configuration
[notification.channels.database]
enabled = true
min_level = "INFO"
max_age_days = 30  # Automatic cleanup of old notifications

# Throttling to prevent notification flooding
[notification.throttling]
enabled = true
window_seconds = 60  # Time window for throttling (in seconds)
max_similar = 5  # Maximum number of similar notifications in the window